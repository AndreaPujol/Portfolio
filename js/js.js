// Datos detallados de proyectos de Andrea Pujol
const projectData = [
    {
        id: 'identidad-visual-1',
        category: 'Identidad Visual',
        title: 'Psicoterapeuta Hol√≠stica',
        subtitle: 'Identidad de marca - Psicoterapeuta Holistica',
        imageUrl: 'img/identidadVisual/LogoJY.png',
        intro: 'Desarrollo integral de identidad visual para Jy Evoluci√≥n, psicoterapeuta hol√≠stica. El objetivo fue crear una imagen que transmita armon√≠a y bienestar, alineada con los valores y la esencia de su pr√°ctica. El proyecto incluy√≥ la conceptualizaci√≥n, dise√±o de logotipo y la aplicaci√≥n de la identidad en diversos soportes y puntos de contacto, asegurando coherencia y conexi√≥n emocional con su p√∫blico objetivo.',
        challenge: 'Jy Evoluci√≥n presentaba una imagen visual desordenada y carec√≠a de una paleta de colores definida, lo que dificulta transmitir armon√≠a y coherencia en su comunicaci√≥n.',
        solution: 'Redise√±√© todas las portadas de Instagram y desarroll√© un manual de marca con lineamientos claros, definiendo la identidad visual y asegurando una presencia coherente y profesional en todos sus canales.',
        process: [
            'An√°lisis de la situaci√≥n actual: Evalu√© la imagen visual existente y detect√© inconsistencias en el uso de colores, tipograf√≠as y elementos gr√°ficos, identificando √°reas de mejora.',
            'Definici√≥n de objetivos y valores de marca: Trabaj√© junto a la clienta para entender sus valores, prop√≥sito y el mensaje de armon√≠a que quer√≠a transmitir, estableciendo una base s√≥lida para el desarrollo visual.',
            'Investigaci√≥n y moodboard: Realic√© una investigaci√≥n visual de referencias y tendencias en psicoterapia hol√≠stica, creando moodboards que inspiran y gu√≠an la nueva identidad visual.',
            'Dise√±o de identidad visual: Desarroll√© una paleta de colores, tipograf√≠a y elementos gr√°ficos que comunican armon√≠a y profesionalismo, asegurando coherencia en todos los soportes.',
            'Redise√±o de portadas y piezas para Instagram: Apliqu√© la nueva identidad visual a todas las portadas y plantillas en Instagram, mejorando la presencia digital y la percepci√≥n de la marca.',
            'Creaci√≥n de manual de marca: Elabor√© un manual de marca con lineamientos claros sobre el uso de los elementos visuales, asegurando una comunicaci√≥n consistente y profesional en todos los canales'
        ],
        tools: ['Adobe Illustrator', 'Adobe Photoshop'],
        duration: '6 semanas',
        team: 'Proyecto individual',
        results: [
            'Incremento del 40% en reconocimiento de marca',
            'Mayor percepci√≥n de calidad premium',
            'Implementaci√≥n exitosa en 15+ puntos de contacto'
        ],
        moodboardUrl: 'img/identidadVisual/MoodBoard.png',
        logosUrl: 'img/identidadVisual/OldNew.png',
        mockupsUrl: 'img/identidadVisual/ManualMarca.png',
        brandBoardUrl: 'img/identidadVisual/BrandBoard.png',
        colors: {
            labels: ['Rosa Suave', 'Lila Elegante', 'Beige Sereno'],
            cmyk: ['C:0 M:31 Y:34 K:5', 'C:25 M:36 Y:27 K:25', 'C:8 M:11 Y:26 K:8'],
            hex: ['#F3A9A2', '#BFA4BB', '#EBE3BC']
        },
        typography: { 
            primary: 'MAGIC RETRO', 
            secondary: 'Montserrat',
            description: 'Estilo retro m√°gico con funcionalidad moderna'
        },
        behanceUrl: 'https://www.behance.net/gallery/229716901/Manual-de-marca-JY'
    },
    {
        id: 'identidad-visual-1',
        category: 'Identidad Visual',
        title: 'Psicoterapeuta Hol√≠stica',
        subtitle: 'Identidad de marca - Psicoterapeuta Holistica',
        imageUrl: 'img/identidadVisual/LogoJY.png',
        intro: 'Desarrollo integral de identidad visual para Jy Evoluci√≥n, psicoterapeuta hol√≠stica. El objetivo fue crear una imagen que transmita armon√≠a y bienestar, alineada con los valores y la esencia de su pr√°ctica. El proyecto incluy√≥ la conceptualizaci√≥n, dise√±o de logotipo y la aplicaci√≥n de la identidad en diversos soportes y puntos de contacto, asegurando coherencia y conexi√≥n emocional con su p√∫blico objetivo.',
        challenge: 'Jy Evoluci√≥n presentaba una imagen visual desordenada y carec√≠a de una paleta de colores definida, lo que dificulta transmitir armon√≠a y coherencia en su comunicaci√≥n.',
        solution: 'Redise√±√© todas las portadas de Instagram y desarroll√© un manual de marca con lineamientos claros, definiendo la identidad visual y asegurando una presencia coherente y profesional en todos sus canales.',
        process: [
            'An√°lisis de la situaci√≥n actual: Evalu√© la imagen visual existente y detect√© inconsistencias en el uso de colores, tipograf√≠as y elementos gr√°ficos, identificando √°reas de mejora.',
            'Definici√≥n de objetivos y valores de marca: Trabaj√© junto a la clienta para entender sus valores, prop√≥sito y el mensaje de armon√≠a que quer√≠a transmitir, estableciendo una base s√≥lida para el desarrollo visual.',
            'Investigaci√≥n y moodboard: Realic√© una investigaci√≥n visual de referencias y tendencias en psicoterapia hol√≠stica, creando moodboards que inspiran y gu√≠an la nueva identidad visual.',
            'Dise√±o de identidad visual: Desarroll√© una paleta de colores, tipograf√≠a y elementos gr√°ficos que comunican armon√≠a y profesionalismo, asegurando coherencia en todos los soportes.',
            'Redise√±o de portadas y piezas para Instagram: Apliqu√© la nueva identidad visual a todas las portadas y plantillas en Instagram, mejorando la presencia digital y la percepci√≥n de la marca.',
            'Creaci√≥n de manual de marca: Elabor√© un manual de marca con lineamientos claros sobre el uso de los elementos visuales, asegurando una comunicaci√≥n consistente y profesional en todos los canales'
        ],
        tools: ['Adobe Illustrator', 'Adobe Photoshop'],
        duration: '6 semanas',
        team: 'Proyecto individual',
        results: [
            'Incremento del 40% en reconocimiento de marca',
            'Mayor percepci√≥n de calidad premium',
            'Implementaci√≥n exitosa en 15+ puntos de contacto'
        ],
        moodboardUrl: 'img/identidadVisual/MoodBoard.png',
        logosUrl: 'img/identidadVisual/OldNew.png',
        mockupsUrl: 'img/identidadVisual/ManualMarca.png',
        brandBoardUrl: 'img/identidadVisual/BrandBoard.png',
        colors: {
            labels: ['Rosa Suave', 'Lila Elegante', 'Beige Sereno'],
            cmyk: ['C:0 M:31 Y:34 K:5', 'C:25 M:36 Y:27 K:25', 'C:8 M:11 Y:26 K:8'],
            hex: ['#F3A9A2', '#BFA4BB', '#EBE3BC']
        },
        typography: { 
            primary: 'MAGIC RETRO', 
            secondary: 'Montserrat',
            description: 'Estilo retro m√°gico con funcionalidad moderna'
        },
        behanceUrl: 'https://www.behance.net/gallery/229716901/Manual-de-marca-JY'
    },
    {
        id: 'identidad-visual-1',
        category: 'Identidad Visual',
        title: 'Psicoterapeuta Hol√≠stica',
        subtitle: 'Identidad de marca - Psicoterapeuta Holistica',
        imageUrl: 'img/identidadVisual/LogoJY.png',
        intro: 'Desarrollo integral de identidad visual para Jy Evoluci√≥n, psicoterapeuta hol√≠stica. El objetivo fue crear una imagen que transmita armon√≠a y bienestar, alineada con los valores y la esencia de su pr√°ctica. El proyecto incluy√≥ la conceptualizaci√≥n, dise√±o de logotipo y la aplicaci√≥n de la identidad en diversos soportes y puntos de contacto, asegurando coherencia y conexi√≥n emocional con su p√∫blico objetivo.',
        challenge: 'Jy Evoluci√≥n presentaba una imagen visual desordenada y carec√≠a de una paleta de colores definida, lo que dificulta transmitir armon√≠a y coherencia en su comunicaci√≥n.',
        solution: 'Redise√±√© todas las portadas de Instagram y desarroll√© un manual de marca con lineamientos claros, definiendo la identidad visual y asegurando una presencia coherente y profesional en todos sus canales.',
        process: [
            'An√°lisis de la situaci√≥n actual: Evalu√© la imagen visual existente y detect√© inconsistencias en el uso de colores, tipograf√≠as y elementos gr√°ficos, identificando √°reas de mejora.',
            'Definici√≥n de objetivos y valores de marca: Trabaj√© junto a la clienta para entender sus valores, prop√≥sito y el mensaje de armon√≠a que quer√≠a transmitir, estableciendo una base s√≥lida para el desarrollo visual.',
            'Investigaci√≥n y moodboard: Realic√© una investigaci√≥n visual de referencias y tendencias en psicoterapia hol√≠stica, creando moodboards que inspiran y gu√≠an la nueva identidad visual.',
            'Dise√±o de identidad visual: Desarroll√© una paleta de colores, tipograf√≠a y elementos gr√°ficos que comunican armon√≠a y profesionalismo, asegurando coherencia en todos los soportes.',
            'Redise√±o de portadas y piezas para Instagram: Apliqu√© la nueva identidad visual a todas las portadas y plantillas en Instagram, mejorando la presencia digital y la percepci√≥n de la marca.',
            'Creaci√≥n de manual de marca: Elabor√© un manual de marca con lineamientos claros sobre el uso de los elementos visuales, asegurando una comunicaci√≥n consistente y profesional en todos los canales'
        ],
        tools: ['Adobe Illustrator', 'Adobe Photoshop'],
        duration: '6 semanas',
        team: 'Proyecto individual',
        results: [
            'Incremento del 40% en reconocimiento de marca',
            'Mayor percepci√≥n de calidad premium',
            'Implementaci√≥n exitosa en 15+ puntos de contacto'
        ],
        moodboardUrl: 'img/identidadVisual/MoodBoard.png',
        logosUrl: 'img/identidadVisual/OldNew.png',
        mockupsUrl: 'img/identidadVisual/ManualMarca.png',
        brandBoardUrl: 'img/identidadVisual/BrandBoard.png',
        colors: {
            labels: ['Rosa Suave', 'Lila Elegante', 'Beige Sereno'],
            cmyk: ['C:0 M:31 Y:34 K:5', 'C:25 M:36 Y:27 K:25', 'C:8 M:11 Y:26 K:8'],
            hex: ['#F3A9A2', '#BFA4BB', '#EBE3BC']
        },
        typography: { 
            primary: 'MAGIC RETRO', 
            secondary: 'Montserrat',
            description: 'Estilo retro m√°gico con funcionalidad moderna'
        },
        behanceUrl: 'https://www.behance.net/gallery/229716901/Manual-de-marca-JY'
    },       
    {
        id: 'ui-ux-1',
        category: 'Dise√±o UX & UI',
        title: 'UX/UI Research & Design',
        subtitle: 'Dise√±o y validaci√≥n de la experiencia de usuario para una app integral de servicios para mascotas',
        imageUrl: 'img/manimalResearch/manimalR.PNG',
        intro: 'Lider√© el dise√±o de ‚Äúmanimal‚Äù, una aplicaci√≥n m√≥vil que centraliza servicios y comercios para mascotas en un solo lugar. Mi objetivo fue crear una experiencia intuitiva, moderna y eficiente, facilitando a los usuarios la b√∫squeda de centros veterinarios, pet shops, comparaci√≥n de precios de alimentos y localizaci√≥n de mascotas perdidas, todo filtrado por ubicaci√≥n. A trav√©s de una investigaci√≥n de mercado profunda y un enfoque centrado en el usuario, dise√±√© flujos claros, interfaces accesibles y soluciones visuales que resuelven necesidades reales de los amantes de mascotas en contextos urbanos. El resultado es una app atractiva y funcional, que mejora la vida de sus usuarios ahorrando tiempo y simplificando procesos.',
        challenge: 'Los amantes de las mascotas enfrentan dificultades para encontrar y comparar servicios, productos y lugares pet friendly, perdiendo tiempo en b√∫squedas dispersas y sin informaci√≥n centralizada.',
        solution: 'Dise√±√© una app intuitiva que centraliza centros veterinarios, pet shops, precios de alimentos y servicios, permitiendo a los usuarios acceder r√°pidamente a toda la informaci√≥n que necesitan, filtrada por ubicaci√≥n y preferencias.',
        process: [
            'Investigaci√≥n de usuarios: Realic√© entrevistas y encuestas para comprender las necesidades, h√°bitos y frustraciones de los due√±os de mascotas al buscar servicios y productos. Identifiqu√© los principales puntos de dolor y oportunidades de mejora.',
            'Benchmarking y an√°lisis de competencia: Analic√© aplicaciones y plataformas existentes para detectar fortalezas, debilidades y diferenciales del mercado, asegurando que Manimal ofreciera valor agregado y una experiencia √∫nica.',
            'Definici√≥n de perfiles y arquetipos de usuario: Desarroll√© personas y escenarios de uso reales, basados en datos recolectados, para guiar el dise√±o hacia soluciones centradas en el usuario final.',
            'Mapeo de experiencia y customer journey: Elabor√© mapas de experiencia y journeys que reflejan el recorrido del usuario, identificando puntos cr√≠ticos, emociones y oportunidades de optimizaci√≥n a lo largo de su interacci√≥n con la app.',
            'Ideaci√≥n y prototipado: Propuse soluciones a partir de insights obtenidos, desarrollando wireframes y prototipos de baja y alta fidelidad para testear r√°pidamente ideas y flujos.',
            'Testeo y validaci√≥n con usuarios: Realic√© pruebas de usabilidad con usuarios reales, recogiendo feedback para iterar y refinar la experiencia, asegurando que la soluci√≥n final sea intuitiva, eficiente y satisfactoria.'
        ],
        tools: ['Figma', 'Adobe Photoshop', 'Adobe Illustrator'],
        duration: '12 semanas',
        team: 'Andrea Pujol (UX/UI Lead), Product Manager, 2 Developers, UX Researcher',
        results: [
            'Tasa de retenci√≥n del 78% en el primer mes',
            'Puntuaci√≥n de 4.7/5 en tiendas de aplicaciones',
            'Incremento del 85% en completaci√≥n de entrenamientos'
        ],
        userFlowUrl: 'img/manimalResearch/ElevatorPitch.jpg',
        wireframesUrl: 'https://placehold.co/800x450/F0F8FF/118AB2?text=Wireframes+%26+Prototipos',
        uiScreensUrl: 'img/manimalResearch/PantallaFinalManimalResearch.jpg',
        usabilityUrl: 'https://placehold.co/800x450/06D6A0/FFFFFF?text=Testing+%26+Resultados',
        colors: {
            labels: ['Verde Turquesa', 'Amarillo Vibrante', 'Marr√≥n Tierra', 'Naranja C√°lido'],
            cmyk: ['C:100 M:0 Y:35 K:32', 'C:0 M:35 Y:100 K:2', 'C:0 M:40 Y:75 K:38', 'C:0 M:50 Y:85 K:7'],
            hex: ['#00ada4', '#faba0d', '#9d5c25', '#ed7122']
        },
        typography: { 
            primary: 'Poppins', 
            secondary: 'Arista 2.0 alternate regular',
            description: 'Moderna y vers√°til para el mundo de las mascotas'
        },
        behanceUrl: 'https://www.behance.net/gallery/165362969/Manimal-UX-Caso'
    },
    {
        id: 'manimal',
        category: 'Dise√±o Gr√°fico',
        title: 'Creaci√≥n de logo',
        subtitle: 'Identidad Visual y Dise√±o de Marca',
        imageUrl: 'img/Presentacion.jpg',
        intro: 'En este proyecto, llev√© adelante el desarrollo integral de la identidad visual para Manimal, abarcando la definici√≥n de la paleta crom√°tica, la selecci√≥n tipogr√°fica y la creaci√≥n de lineamientos gr√°ficos que transmiten los valores de la marca. M√°s all√° del aspecto visual, me encargu√© de realizar la investigaci√≥n UX necesaria para la creaci√≥n de una aplicaci√≥n m√≥vil, enfocada en entender las necesidades de los usuarios y optimizar la experiencia dentro de la app.El proceso incluy√≥ la identificaci√≥n de los distintos perfiles de usuario, el an√°lisis de sus recorridos y expectativas, as√≠ como la elaboraci√≥n de wireframes y prototipos interactivos. Todo este trabajo permiti√≥ el dise√±o de una app intuitiva, funcional y alineada con la propuesta de valor de Manimal, conectando a los usuarios con centros veterinarios, pet shops y otros servicios para mascotas de manera simple y eficiente.',
        challenge: 'El principal desaf√≠o de la creaci√≥n de Manimal fue acortar y modernizar el nombre original "Mundo Animal". Al unir ambas palabras, logramos una denominaci√≥n √∫nica que sigue transmitiendo el concepto de mundo animal. Adem√°s, se dise√±√≥ una identidad visual acorde a la app, donde los usuarios pueden encontrar centros veterinarios, pet shops y mucho m√°s, generando una experiencia amigable y coherente con el universo de las mascotas. una experiencia que motive a usuarios de diferentes niveles a mantener consistencia en sus entrenamientos, simplificando la complejidad de la planificaci√≥n fitness.',
        solution: 'Desarroll√© una interfaz intuitiva con gamificaci√≥n sutil, onboarding personalizado y sistema de progreso visual que mantiene a los usuarios motivados y comprometidos con sus objetivos.',
        process: [
            'Brief y an√°lisis del cliente: Relevamiento de informaci√≥n sobre la identidad, valores y objetivos de la marca para definir el enfoque visual adecuado',
            'Investigaci√≥n y referencias: B√∫squeda de referencias visuales y an√°lisis de tendencias relacionadas con el sector para inspirar el desarrollo del logotipo y la identidad',
            'Bocetado y exploraci√≥n de ideas: Realizaci√≥n de bocetos a mano alzada y exploraciones digitales para definir conceptos iniciales del logo y evaluar posibles direcciones creativas',
            'Selecci√≥n y vectorizaci√≥n del logotipo: Elecci√≥n del boceto final y digitalizaci√≥n/vectorizaci√≥n del logotipo para asegurar su correcta aplicaci√≥n en distintos formatos y escalas',
            'Desarrollo de paleta de colores: Selecci√≥n de una paleta crom√°tica coherente con los valores de la marca, buscando transmitir las sensaciones y emociones deseadas',
            'Definici√≥n de tipograf√≠a: Elecci√≥n de fuentes tipogr√°ficas que acompa√±en y refuercen la identidad visual, asegurando legibilidad y armon√≠a en todas las piezas gr√°ficas'
        ],
        tools: ['Adobe Photoshop', 'Adobe Illustrator'],
        duration: '12 semanas',
        team: 'Andrea Pujol (UX/UI Lead), Product Manager, 2 Developers, UX Researcher',
        results: [
            'Tasa de retenci√≥n del 78% en el primer mes',
            'Puntuaci√≥n de 4.7/5 en tiendas de aplicaciones',
            'Incremento del 85% en completaci√≥n de entrenamientos'
        ],
        userFlowUrl: 'img/manimalLogo.jpg',
        wireframesUrl: 'https://placehold.co/800x450/F0F8FF/118AB2?text=Wireframes+%26+Prototipos',
        uiScreensUrl: 'img/PantallaFinalManimal.jpg',
        usabilityUrl: 'https://placehold.co/800x450/06D6A0/FFFFFF?text=Testing+%26+Resultados',
        colors: {
            labels: ['Verde Turquesa', 'Amarillo Vibrante', 'Marr√≥n Tierra', 'Naranja C√°lido'],
            cmyk: ['C:100 M:0 Y:35 K:32', 'C:0 M:35 Y:100 K:2', 'C:0 M:40 Y:75 K:38', 'C:0 M:50 Y:85 K:7'],
            hex: ['#00ada4', '#faba0d', '#9d5c25', '#ed7122']
        },
        typography: { 
            primary: 'Poppins', 
            secondary: 'Arista 2.0 alternate regular',
            description: 'Moderna y vers√°til para el mundo de las mascotas'
        },
        behanceUrl: 'https://www.behance.net/gallery/197723505/Presentacion_Logo_Manimal'
    }
];

// Variables globales
let chartInstance = null;
let currentFilter = 'Todos';

// Elementos DOM
const gallery = document.getElementById('project-gallery');
const filtersContainer = document.getElementById('project-filters');
const modal = document.getElementById('project-modal');
const modalContent = document.getElementById('modal-content');
const modalBody = document.getElementById('modal-body');
const closeModalBtn = document.getElementById('modal-close-btn');

// Inicializaci√≥n cuando el DOM est√° listo
document.addEventListener('DOMContentLoaded', function() {
    initializeFilters();
    displayProjects();
    initializeScrollAnimations();
    initializeNavigation();
    
    // Funcionalidades m√≥viles
    initializeMobileFeatures();
    enhanceMobileNavigation();
    optimizeMobileModal();
    improveMobileLoading();
    enhanceMobileAccessibility();
});

// Inicializar filtros
function initializeFilters() {
    const categories = ['Todos', ...new Set(projectData.map(p => p.category))];
    
    categories.forEach(category => {
        const button = document.createElement('button');
        button.className = 'filter-btn py-3 px-6 rounded-full text-sm font-semibold transition-all duration-300';
        button.textContent = category;
        button.dataset.filter = category;
        
        if (category === 'Todos') {
            button.classList.add('active', 'bg-gradient-to-r', 'from-[#073B4C]', 'to-[#118AB2]', 'text-white');
        } else {
            button.classList.add('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
        }
        
        filtersContainer.appendChild(button);
    });

    // Event listeners para filtros
    const filterButtons = filtersContainer.querySelectorAll('button');
    filterButtons.forEach(button => {
        button.addEventListener('click', () => {
            updateActiveFilter(button, filterButtons);
            displayProjects(button.dataset.filter);
        });
    });
}

// Actualizar filtro activo
function updateActiveFilter(activeButton, allButtons) {
    allButtons.forEach(btn => {
        btn.classList.remove('active', 'bg-gradient-to-r', 'from-[#073B4C]', 'to-[#118AB2]', 'text-white');
        btn.classList.add('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
    });
    
    activeButton.classList.add('active', 'bg-gradient-to-r', 'from-[#073B4C]', 'to-[#118AB2]', 'text-white');
    activeButton.classList.remove('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
    
    currentFilter = activeButton.dataset.filter;
}

// Mostrar proyectos con animaci√≥n
function displayProjects(filter = 'Todos') {
    gallery.innerHTML = '';
    const filteredProjects = filter === 'Todos' ? projectData : projectData.filter(p => p.category === filter);
    
    filteredProjects.forEach((project, index) => {
        const card = document.createElement('div');
        card.className = 'card cursor-pointer group opacity-0 transform translate-y-8';
        card.style.animationDelay = `${index * 0.1}s`;
        
        // Configurar el estilo de imagen seg√∫n el proyecto
        const imageClass = project.id === 'identidad-visual-1' 
            ? 'w-full h-56 object-cover transition-transform duration-300 scale-200'
            : 'w-full h-56 object-cover transition-transform duration-300';
        
        card.innerHTML = `
            <div class="project-image overflow-hidden rounded-t-lg">
                <img src="${project.imageUrl}" alt="${project.title}" class="${imageClass}">
            </div>
            <div class="p-6">
                <div class="category-badge mb-3">${project.category}</div>
                <h3 class="text-xl font-bold text-[#073B4C] mb-2 group-hover:text-[#118AB2] transition-colors">${project.title}</h3>
                <p class="text-sm text-gray-600 mb-3">${project.subtitle}</p>
                <div class="flex items-center justify-between text-sm text-gray-500">
                    <span>${project.duration}</span>
                    <span class="text-[#118AB2] font-semibold">Ver proyecto ‚Üí</span>
                </div>
            </div>
        `;
        
        card.addEventListener('click', () => openModal(project));
        gallery.appendChild(card);
        
        // Animaci√≥n de entrada
        setTimeout(() => {
            card.classList.remove('opacity-0', 'translate-y-8');
            card.classList.add('opacity-100', 'translate-y-0');
        }, index * 100);
    });
}

// Abrir modal con informaci√≥n detallada
function openModal(project) {
    const content = generateModalContent(project);
    modalBody.innerHTML = content;
    
    // Mostrar modal con animaci√≥n
    modal.classList.remove('opacity-0', 'pointer-events-none');
    modalContent.classList.remove('scale-95');
    modalContent.classList.add('scale-100');
    document.body.style.overflow = 'hidden';

    // Crear gr√°fico de colores si existe
    if (project.colors) {
        setTimeout(() => createColorChart(project), 100);
    }
}

// Generar contenido completo del modal
function generateModalContent(project) {
    let content = `
        <div class="space-y-8">
            <!-- Header del proyecto -->
            <div class="text-center pb-6 border-b border-gray-200">
                <div class="category-badge mb-3">${project.category}</div>
                <h2 class="font-display text-4xl font-bold text-[#073B4C] mb-2">${project.title}</h2>
                <p class="text-xl text-[#118AB2] mb-4">${project.subtitle}</p>
                <div class="flex flex-wrap justify-center gap-4 text-sm text-gray-600 mb-4">
                    <span><strong>Duraci√≥n:</strong> ${project.duration}</span>
                    <span><strong>Equipo:</strong> ${project.team}</span>
                    <span><strong>Herramientas:</strong> ${project.tools.join(', ')}</span>
                </div>
                ${project.behanceUrl ? `
                    <div class="mt-4">
                        <a href="${project.behanceUrl}" target="_blank" rel="noopener noreferrer" 
                           class="inline-flex items-center px-6 py-3 bg-[#1769FF] hover:bg-[#0052CC] text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl">
                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30"
                                viewBox="0,0,256,256">
                                <g fill="currentColor" fill-rule="nonzero" stroke="none" stroke-width="1"
                                    stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"
                                    stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none"
                                    font-size="none" text-anchor="none" style="mix-blend-mode: normal">
                                    <g transform="scale(5.12,5.12)">
                                        <path
                                            d="M9,4c-2.76,0 -5,2.24 -5,5v32c0,2.76 2.24,5 5,5h32c2.76,0 5,-2.24 5,-5v-32c0,-2.76 -2.24,-5 -5,-5zM12,18h6.73047c0.73,0 4.67969,-0.04969 4.67969,3.57031c0,1.92 -1.31039,2.56938 -1.90039,2.85938c0.88,0.28 2.49023,1.09031 2.49023,3.57031c0,3.83 -4.39047,4 -4.98047,4h-7.01953zM29,18h7v2h-7zM15,20.42969v3.28125h3.2207c0.44,0 1.89844,-0.24094 1.89844,-1.71094c0,-1.47 -1.89945,-1.57031 -2.18945,-1.57031zM32.73047,21c3.9,0 4.95914,3.03977 5.11914,3.75977c0.15,0.73 0.15039,1.37023 0.15039,2.24023h-7.90039c0,0.87 0.46102,2.83008 2.79102,2.83008c0.62,0 1.07883,-0.14945 1.54883,-0.43945c0.46,-0.29 0.62148,-0.57133 0.77148,-0.86133h2.62891c-0.46,1.15 -1.07977,2.02156 -2.00977,2.60156c-0.93,0.58 -2.01,0.86914 -3.25,0.86914c-0.78,0 -1.55008,-0.14945 -2.33008,-0.43945c-0.62,-0.29 -1.23922,-0.72039 -1.69922,-1.15039c-0.46,-0.44 -0.77008,-1.02023 -1.08008,-1.74023c-0.31,-0.58 -0.4707,-1.44992 -0.4707,-2.16992c0,-0.72 0.29047,-5.5 5.73047,-5.5zM32.73047,23.0293c-2.26,0 -2.63086,2.17055 -2.63086,2.31055h4.96094c-0.16,-0.72 -0.81008,-2.31055 -2.33008,-2.31055zM15,25.71094v3.85937h3.35156c0.289,0 2.32813,-0.08938 2.32813,-1.85937c0,-1.76 -1.60213,-2 -2.32813,-2z">
                                        </path>
                                    </g>
                                </g>
                            </svg>
                            Ver en Behance
                        </a>
                    </div>
                ` : ''}
            </div>

            <!-- Descripci√≥n e introducci√≥n -->
            <div class="project-section">
                <h3 class="font-bold text-2xl mb-4 text-[#073B4C]">Descripci√≥n del Proyecto</h3>
                <p class="text-gray-700 leading-relaxed">${project.intro}</p>
            </div>

            <!-- Desaf√≠o y Soluci√≥n -->
            <div class="grid md:grid-cols-2 gap-6">
                <div class="project-section">
                    <h3 class="font-bold text-xl mb-4 text-[#FF6B6B]">üéØ Desaf√≠o</h3>
                    <p class="text-gray-700 leading-relaxed">${project.challenge}</p>
                </div>
                <div class="project-section">
                    <h3 class="font-bold text-xl mb-4 text-[#06D6A0]">üí° Soluci√≥n</h3>
                    <p class="text-gray-700 leading-relaxed">${project.solution}</p>
                </div>
            </div>

            <!-- Proceso de trabajo -->
            <div class="project-section">
                <h3 class="font-bold text-2xl mb-4 text-[#073B4C]">Proceso de Trabajo</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    ${project.process.map((step, index) => `
                        <div class="flex items-start space-x-3">
                            <div class="bg-[#118AB2] text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-1">
                                ${index + 1}
                            </div>
                            <p class="text-gray-700">${step}</p>
                        </div>
                    `).join('')}
                </div>
            </div>
    `;

    // Agregar secciones espec√≠ficas seg√∫n el tipo de proyecto
    if (project.moodboardUrl) {
        content += `
            <div class="project-section">
                <h3 class="font-bold text-2xl mb-4 text-[#073B4C]">Moodboard e Inspiraci√≥n</h3>
                <div class="project-image-gallery">
                    <img src="${project.moodboardUrl}" class="w-full rounded-lg shadow-lg" alt="Moodboard del proyecto">
                </div>
            </div>
        `;
    }

    if (project.logosUrl || project.layoutsUrl || project.userFlowUrl) {
        const imageUrl = project.logosUrl || project.layoutsUrl || project.userFlowUrl;
        const title = project.logosUrl ? 'Dise√±o de branding para redes sociales' : 
                     project.layoutsUrl ? 'Layouts y Composici√≥n' : 
                     project.id === 'manimal' ? 'Logo' :
                     project.id === 'ui-ux-1' ? 'Elevator Pitch' :                     
                     'Flujo de Usuario y Arquitectura';
        
        content += `
            <div class="project-section">
                <h3 class="font-bold text-2xl mb-4 text-[#073B4C]">${title}</h3>
                <div class="project-image-gallery">
                    <img src="${imageUrl}" class="w-full rounded-lg shadow-lg" alt="${title}">
                </div>
            </div>
        `;
    }

    // Paleta de colores y tipograf√≠a
    if (project.colors) {
        content += `
            <div class="project-section">
                <h3 class="font-bold text-2xl mb-4 text-[#073B4C]">Paleta de Colores y Tipograf√≠a</h3>
                <div class="grid lg:grid-cols-2 gap-8 items-center">
                    <div>
                        <h4 class="font-semibold text-lg mb-3 text-[#118AB2]">Paleta Crom√°tica</h4>
                        <div class="chart-container">
                            <canvas id="color-chart-canvas"></canvas>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold text-lg mb-4 text-[#118AB2]">Tipograf√≠a</h4>
                        <div class="space-y-4">
                            <div class="p-4 bg-white rounded-lg border border-gray-200">
                                <p class="font-bold text-2xl" style="font-family: '${project.typography.primary}', serif;">${project.typography.primary}</p>
                                <p class="text-gray-600 text-sm mt-1">T√≠tulos y destacados</p>
                            </div>
                            <div class="p-4 bg-white rounded-lg border border-gray-200">
                                <p class="font-semibold text-lg" style="font-family: '${project.typography.secondary}', sans-serif;">${project.typography.secondary}</p>
                                <p class="text-gray-600 text-sm mt-1">Cuerpo de texto</p>
                            </div>
                            <p class="text-sm text-gray-600 italic">${project.typography.description}</p>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    // Brand Board
    if (project.brandBoardUrl) {
        content += `
            <div class="project-section">
                <h3 class="font-bold text-2xl mb-4 text-[#073B4C]">Brand Board</h3>
                <div class="project-image-gallery">
                    <img src="${project.brandBoardUrl}" class="w-full rounded-lg shadow-lg" alt="Brand Board del proyecto">
                </div>
            </div>
        `;
    }

    // Aplicaciones y mockups finales
    if (project.mockupsUrl || project.uiScreensUrl) {
        const imageUrl = project.mockupsUrl || project.uiScreensUrl;
        const title = project.uiScreensUrl ? 'Pantallas Finales de la Aplicaci√≥n' : 'Manual de Marca';
        
        content += `
            <div class="project-section">
                <h3 class="font-bold text-2xl mb-4 text-[#073B4C]">${title}</h3>
                <div class="project-image-gallery">
                    <img src="${imageUrl}" class="w-full rounded-lg shadow-lg" alt="${title}">
                </div>
            </div>
        `;
    }

    // Resultados y m√©tricas
    if (project.results && project.results.length > 0) {
        content += `
            <div class="project-section">
                <h3 class="font-bold text-2xl mb-4 text-[#073B4C]">Resultados e Impacto</h3>
                <div class="grid md:grid-cols-3 gap-4">
                    ${project.results.map(result => `
                        <div class="bg-gradient-to-br from-[#118AB2] to-[#06D6A0] text-white p-4 rounded-lg text-center">
                            <p class="font-semibold">${result}</p>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    }

    content += `</div>`;
    return content;
}

// Cerrar modal
function closeModal() {
    modal.classList.add('opacity-0', 'pointer-events-none');
    modalContent.classList.remove('scale-100');
    modalContent.classList.add('scale-95');
    document.body.style.overflow = 'auto';
    
    if (chartInstance) {
        chartInstance.destroy();
        chartInstance = null;
    }
}

// Crear gr√°fico de colores interactivo
function createColorChart(project) {
    if (chartInstance) chartInstance.destroy();
    
    const canvas = document.getElementById('color-chart-canvas');
    if (!canvas) return;
    
    const ctx = canvas.getContext('2d');
    chartInstance = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: project.colors.labels,
            datasets: [{
                label: 'Paleta de Colores',
                data: Array(project.colors.labels.length).fill(100),
                backgroundColor: project.colors.hex,
                borderColor: project.colors.hex.map(color => color + '80'),
                borderWidth: 2,
                borderRadius: 8,
                borderSkipped: false,
            }]
        },
        options: {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: {
                    backgroundColor: 'rgba(7, 59, 76, 0.95)',
                    titleColor: '#FFFFFF',
                    bodyColor: '#FFFFFF',
                    titleFont: { weight: 'bold', size: 14 },
                    bodyFont: { size: 12 },
                    displayColors: true,
                    borderColor: '#118AB2',
                    borderWidth: 1,
                    cornerRadius: 8,
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            return item.chart.data.labels[item.dataIndex];
                        },
                        label: function(context) {
                            return [
                                `CMYK: ${project.colors.cmyk[context.dataIndex]}`,
                                `HEX: ${project.colors.hex[context.dataIndex]}`
                            ];
                        }
                    }
                }
            },
            scales: {
                x: { 
                    display: false, 
                    grid: { display: false } 
                },
                y: { 
                    grid: { display: false }, 
                    ticks: { 
                        font: { weight: '600', size: 12 },
                        color: '#073B4C'
                    }
                }
            },
            animation: {
                duration: 1000,
                easing: 'easeOutQuart'
            }
        }
    });
}

// Animaciones de scroll
function initializeScrollAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });
    }, observerOptions);

    // Observar secciones para animaciones
    document.querySelectorAll('section').forEach(section => {
        section.classList.add('section-fade-in');
        observer.observe(section);
    });
}

// Navegaci√≥n suave y men√∫ m√≥vil
function initializeNavigation() {
    // Navegaci√≥n suave para enlaces internos
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            const target = document.querySelector(this.getAttribute('href'));
            // Solo cerrar men√∫ y hacer scroll si el enlace es v√°lido y no es solo '#'
            if (target && this.getAttribute('href') !== '#') {
                e.preventDefault();
                // Cerrar men√∫ m√≥vil si est√° abierto (la animaci√≥n y cierre real se gestiona en enhanceMobileNavigation)
                const mobileMenu = document.getElementById('mobile-menu');
                if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                    // Esperar a que el men√∫ se oculte antes de hacer scroll
                    setTimeout(() => {
                        scrollToSection(target);
                    }, 250); // Coincide con la duraci√≥n de la animaci√≥n de cierre
                } else {
                    scrollToSection(target);
                }
            }
        });
    });

    // Funci√≥n para hacer scroll considerando la altura del header
    function scrollToSection(target) {
        const headerHeight = document.querySelector('header').offsetHeight;
        const targetPosition = target.offsetTop - headerHeight - 20; // 20px de margen extra
        
        window.scrollTo({
            top: targetPosition,
            behavior: 'smooth'
        });
    }

    // Highlight del men√∫ activo basado en scroll
    const sections = document.querySelectorAll('section[id]');
    const navLinks = document.querySelectorAll('nav a[href^="#"]');

    function highlightActiveSection() {
        let current = '';
        const headerHeight = document.querySelector('header').offsetHeight;
        
        sections.forEach(section => {
            const sectionTop = section.offsetTop - headerHeight - 50;
            if (window.scrollY >= sectionTop) {
                current = section.getAttribute('id');
            }
        });

        navLinks.forEach(link => {
            link.classList.remove('text-[#FFD166]', 'font-bold');
            if (link.getAttribute('href') === `#${current}`) {
                link.classList.add('text-[#FFD166]', 'font-bold');
            }
        });
    }

    window.addEventListener('scroll', highlightActiveSection);
}

// Funcionalidades espec√≠ficas para m√≥viles
function initializeMobileFeatures() {
    // Detectar si es dispositivo m√≥vil
    const isMobile = window.innerWidth <= 768;
    
    if (isMobile) {
        // Mejorar el rendimiento en m√≥viles
        optimizeForMobile();
        
        // Manejar orientaci√≥n
        handleOrientationChange();
        
        // Mejorar interacciones t√°ctiles
        improveTouchInteractions();
        
        // Optimizar animaciones
        optimizeMobileAnimations();
    }
}

// Optimizaciones para m√≥viles
function optimizeForMobile() {
    // Reducir la frecuencia de eventos scroll
    let scrollTimeout;
    const originalScrollHandler = window.onscroll;
    
    window.onscroll = function() {
        if (scrollTimeout) {
            clearTimeout(scrollTimeout);
        }
        scrollTimeout = setTimeout(() => {
            if (originalScrollHandler) originalScrollHandler();
        }, 16); // ~60fps
    };
    
    // Precargar im√°genes con lazy loading
    const images = document.querySelectorAll('img[data-src]');
    const imageObserver = new IntersectionObserver(
        (entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src;
                    img.removeAttribute('data-src');
                    imageObserver.unobserve(img);
                }
            });
        },
        { rootMargin: '50px' }
    );
    
    images.forEach(img => imageObserver.observe(img));
}

// Manejar cambios de orientaci√≥n
function handleOrientationChange() {
    function adjustForOrientation() {
        const isLandscape = window.innerHeight < window.innerWidth;
        document.body.classList.toggle('landscape-mobile', isLandscape && window.innerWidth <= 768);
        
        // Reajustar modal si est√° abierto
        const modal = document.getElementById('project-modal');
        if (modal && !modal.classList.contains('pointer-events-none')) {
            setTimeout(() => {
                const modalContent = document.getElementById('modal-content');
                if (modalContent) {
                    modalContent.style.maxHeight = `${window.innerHeight * 0.9}px`;
                }
            }, 100);
        }
    }
    
    window.addEventListener('orientationchange', () => {
        setTimeout(adjustForOrientation, 100);
    });
    
    window.addEventListener('resize', adjustForOrientation);
    adjustForOrientation();
}

// Mejorar interacciones t√°ctiles
function improveTouchInteractions() {
    // Mejorar el scroll en modales
    const modal = document.getElementById('project-modal');
    const modalBody = document.getElementById('modal-body');
    
    if (modal && modalBody) {
        // Prevenir scroll del body cuando el modal est√° abierto
        modal.addEventListener('touchstart', (e) => {
            if (e.target === modal) {
                e.preventDefault();
            }
        });
        
        // Mejorar el scroll dentro del modal
        let startY = 0;
        modalBody.addEventListener('touchstart', (e) => {
            startY = e.touches[0].clientY;
        });
        
        modalBody.addEventListener('touchmove', (e) => {
            const currentY = e.touches[0].clientY;
            const scrollTop = modalBody.scrollTop;
            const scrollHeight = modalBody.scrollHeight;
            const clientHeight = modalBody.clientHeight;
            
            // Prevenir bounce scroll
            if ((scrollTop <= 0 && currentY > startY) || 
                (scrollTop >= scrollHeight - clientHeight && currentY < startY)) {
                e.preventDefault();
            }
        });
    }
    
    // Mejorar los filtros de proyectos para touch
    const filterButtons = document.querySelectorAll('.filter-btn');
    filterButtons.forEach(btn => {
        btn.addEventListener('touchstart', function() {
            this.style.transform = 'scale(0.95)';
        });
        
        btn.addEventListener('touchend', function() {
            this.style.transform = '';
        });
    });
    
    // Hacer las tarjetas m√°s responsivas al touch
    const projectCards = document.querySelectorAll('.card');
    projectCards.forEach(card => {
        card.addEventListener('touchstart', function() {
            this.style.transform = 'translateY(-2px)';
        });
        
        card.addEventListener('touchend', function() {
            setTimeout(() => {
                this.style.transform = '';
            }, 150);
        });
    });
}

// Optimizar animaciones para m√≥viles
function optimizeMobileAnimations() {
    const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
    const isSlowConnection = connection && (connection.saveData || connection.effectiveType === 'slow-2g' || connection.effectiveType === '2g');
    
    if (isSlowConnection) {
        document.body.classList.add('reduce-animations');
        
        // CSS para reducir animaciones
        const style = document.createElement('style');
        style.textContent = `
            .reduce-animations *, 
            .reduce-animations *::before, 
            .reduce-animations *::after {
                animation-duration: 0.1s !important;
                transition-duration: 0.1s !important;
            }
        `;
        document.head.appendChild(style);
    }
}

// Mejorar la navegaci√≥n m√≥vil
function enhanceMobileNavigation() {
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    
    if (!mobileMenuBtn || !mobileMenu) {
        return;
    }
    
    // Funci√≥n para toggle del men√∫
    function toggleMenu() {
        const isHidden = mobileMenu.classList.contains('hidden');
        
        if (isHidden) {
            mobileMenu.classList.remove('hidden');
            mobileMenu.style.animation = 'slideDown 0.3s ease-out forwards';
        } else {
            mobileMenu.style.animation = 'slideUp 0.3s ease-out forwards';
            setTimeout(() => {
                mobileMenu.classList.add('hidden');
                mobileMenu.style.animation = '';
            }, 250);
        }
    }
    
    // Event listeners para el bot√≥n
    mobileMenuBtn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        toggleMenu();
    });
    
    mobileMenuBtn.addEventListener('touchend', function(e) {
        e.preventDefault();
        e.stopPropagation();
        toggleMenu();
    });
    
    // Cerrar men√∫ al hacer clic en enlaces
    const menuLinks = mobileMenu.querySelectorAll('a');
    menuLinks.forEach(link => {
        link.addEventListener('click', function() {
            mobileMenu.style.animation = 'slideUp 0.3s ease-out forwards';
            setTimeout(() => {
                mobileMenu.classList.add('hidden');
                mobileMenu.style.animation = '';
            }, 250);
        });
    });
    
    // Cerrar men√∫ al hacer clic fuera
    document.addEventListener('click', function(e) {
        if (!mobileMenu.classList.contains('hidden') && 
            !mobileMenu.contains(e.target) && 
            !mobileMenuBtn.contains(e.target)) {
            mobileMenu.style.animation = 'slideUp 0.3s ease-out forwards';
            setTimeout(() => {
                mobileMenu.classList.add('hidden');
                mobileMenu.style.animation = '';
            }, 250);
        }
    });
    
    // Agregar estilos de animaci√≥n si no existen
    if (!document.getElementById('mobile-menu-animations')) {
        const animationStyles = document.createElement('style');
        animationStyles.id = 'mobile-menu-animations';
        animationStyles.textContent = `
            @keyframes slideDown {
                from { 
                    opacity: 0; 
                    transform: translateY(-10px);
                    visibility: visible;
                }
                to { 
                    opacity: 1; 
                    transform: translateY(0);
                    visibility: visible;
                }
            }
            
            @keyframes slideUp {
                from { 
                    opacity: 1; 
                    transform: translateY(0);
                    visibility: visible;
                }
                to { 
                    opacity: 0; 
                    transform: translateY(-10px);
                    visibility: hidden;
                }
            }
        `;
        document.head.appendChild(animationStyles);
    }
}

// Optimizar modal para m√≥viles
function optimizeMobileModal() {
    const modal = document.getElementById('project-modal');
    const modalContent = document.getElementById('modal-content');
    const modalBody = document.getElementById('modal-body');
    
    if (modal && modalContent && modalBody) {
        // Funci√≥n para ajustar el modal al tama√±o de pantalla
        function adjustModalForMobile() {
            if (window.innerWidth <= 768) {
                modalContent.style.margin = '0.5rem';
                modalContent.style.maxHeight = `${window.innerHeight - 16}px`;
                modalContent.style.width = 'calc(100% - 1rem)';
                modalBody.style.maxHeight = `${window.innerHeight - 120}px`;
            } else {
                modalContent.style.margin = '';
                modalContent.style.maxHeight = '';
                modalContent.style.width = '';
                modalBody.style.maxHeight = '';
            }
        }
        
        // Aplicar al redimensionar
        window.addEventListener('resize', adjustModalForMobile);
        
        // Observar cuando se abre el modal
        const modalObserver = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                    if (!modal.classList.contains('pointer-events-none')) {
                        setTimeout(adjustModalForMobile, 50);
                    }
                }
            });
        });
        
        modalObserver.observe(modal, { attributes: true });
    }
}

// Mejorar la experiencia de carga en m√≥viles
function improveMobileLoading() {
    // Lazy loading para im√°genes
    const images = document.querySelectorAll('img');
    
    if ('IntersectionObserver' in window) {
        const imageObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    if (img.dataset.src) {
                        img.src = img.dataset.src;
                        img.removeAttribute('data-src');
                    }
                    observer.unobserve(img);
                }
            });
        }, {
            rootMargin: '100px'
        });
        
        images.forEach(img => {
            if (img.dataset.src) {
                imageObserver.observe(img);
            }
        });
    }
    
    // Precargar recursos cr√≠ticos
    if ('requestIdleCallback' in window) {
        requestIdleCallback(() => {
            if (projectData.length > 0) {
                const firstProject = projectData[0];
                const img = new Image();
                img.src = firstProject.imageUrl;
            }
        });
    }
}

// Mejorar accesibilidad en m√≥viles
function enhanceMobileAccessibility() {
    // Mejorar navegaci√≥n por teclado virtual
    const inputs = document.querySelectorAll('input, textarea');
    inputs.forEach(input => {
        // Prevenir zoom en iOS
        if (parseFloat(getComputedStyle(input).fontSize) < 16) {
            input.style.fontSize = '16px';
        }
        
        // Mejorar el comportamiento del teclado virtual
        input.addEventListener('focus', () => {
            setTimeout(() => {
                if (window.innerWidth <= 768) {
                    input.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'center' 
                    });
                }
            }, 300);
        });
    });
    
    // Mejorar los enlaces para touch
    const links = document.querySelectorAll('a');
    links.forEach(link => {
        const rect = link.getBoundingClientRect();
        if (rect.width < 44 || rect.height < 44) {
            link.style.minWidth = '44px';
            link.style.minHeight = '44px';
            link.style.display = 'inline-flex';
            link.style.alignItems = 'center';
            link.style.justifyContent = 'center';
        }
    });
}

// Event listeners
closeModalBtn.addEventListener('click', closeModal);
modal.addEventListener('click', (e) => {
    if (e.target === modal) closeModal();
});

// Cerrar modal con tecla Escape
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !modal.classList.contains('pointer-events-none')) {
        closeModal();
    }
});

// Preloader para im√°genes
function preloadImages() {
    projectData.forEach(project => {
        const img = new Image();
        img.src = project.imageUrl;
    });
}

// Inicializar preloader
preloadImages();

// Mejorar la vista previa del CV con iframe
document.addEventListener('DOMContentLoaded', function() {
    const cvPreview = document.querySelector('.cv-preview');
    const cvIframe = cvPreview ? cvPreview.querySelector('iframe') : null;
    
    if (cvIframe) {
        // Manejar la carga del iframe
        cvIframe.addEventListener('load', function() {
            this.setAttribute('data-loaded', 'true');
            
            // Agregar una clase para indicar que est√° cargado
            cvPreview.classList.add('cv-loaded');
            
            // Ocultar cualquier indicador de carga
            const loadingIndicator = cvPreview.querySelector('.loading-indicator');
            if (loadingIndicator) {
                loadingIndicator.style.opacity = '0';
                setTimeout(() => loadingIndicator.remove(), 300);
            }
        });
        
        // Manejar errores de carga
        cvIframe.addEventListener('error', function() {
            // Error silencioso para mejor UX
        });
    }
});

// Funci√≥n para descargar CV
function downloadCV() {
    const button = document.querySelector('button[onclick*="downloadCV"]');
    const originalText = button ? button.textContent : '';
    
    if (button) {
        button.innerHTML = `
            <svg class="w-4 h-4 mr-2 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
            </svg>
            Descargando PDF...
        `;
        button.disabled = true;
    }
    
    // Crear link de descarga para PDF
    const pdfLink = document.createElement('a');
    pdfLink.href = './CV.pdf';
    pdfLink.download = 'CV_Andrea_Pujol_Dise√±adora_UXUI.pdf';
    pdfLink.target = '_blank';
    
    document.body.appendChild(pdfLink);
    pdfLink.click();
    document.body.removeChild(pdfLink);
    
    // Restaurar el bot√≥n
    setTimeout(() => {
        if (button) {
            button.innerHTML = '‚úì CV Descargado';
            setTimeout(() => {
                button.innerHTML = originalText;
                button.disabled = false;
            }, 1500);
        }
    }, 500);
}

// Funci√≥n para abrir el CV en pantalla completa
function openCVFullscreen() {
    const pdfWindow = window.open('./CV.pdf', '_blank', 'width=' + screen.width + ',height=' + screen.height + ',fullscreen=yes,resizable=yes,scrollbars=yes,toolbar=yes,menubar=yes');
    
    if (!pdfWindow) {
        // Fallback si las ventanas emergentes est√°n bloqueadas
        const link = document.createElement('a');
        link.href = './CV.pdf';
        link.target = '_blank';
        link.rel = 'noopener noreferrer';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
}
